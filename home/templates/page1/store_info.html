{% extends "page1/base.html" %}
{% load static %}

{% block title %}Th√¥ng Tin Kho H√†ng{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block content %}
    <!-- Ph·∫ßn hi·ªÉn th·ªã cho Qu·∫£n l√Ω (Manager) -->
    {% if is_manager %}
    <div class="update-info">
        <h2>C·∫≠p nh·∫≠t th√¥ng tin kho h√†ng</h2>
        <form id="storeForm" method="POST">
            {% csrf_token %}
            <p>
                <label for="id_name">T√™n kho h√†ng:</label>
                {{ form.name }}
            </p>
            <p>
                <label for="id_address">ƒê·ªãa ch·ªâ kho h√†ng:</label>
                {{ form.address }}
            </p>
            <button type="submit">L∆∞u thay ƒë·ªïi</button>
        </form>

        <hr>

        <form id="deleteForm" method="POST" action="{% url 'delete_store' %}">
            {% csrf_token %}
            <button type="submit" style="background-color: red; color: white;">üóëÔ∏è Xo√° kho h√†ng</button>
        </form>

        <!-- Th√™m n√∫t th√™m nh√¢n vi√™n -->
        <div>
            <a href="{% url 'add_employee' %}">Th√™m nh√¢n vi√™n</a>
            <h3>Danh s√°ch nh√¢n vi√™n</h3>
            <ul>
                {% for store_user in store.storeuser_set.all %}
                    <li>
                        {{ store_user.user.username }} - {{ store_user.role }}
                        {% if store_user.role == 'manager' %}
                            <strong>(Qu·∫£n l√Ω)</strong>
                        {% endif %}
                        <!-- S·ª≠a quy·ªÅn -->
                        <a href="{% url 'edit_employee_role' store_user.user.id %}">S·ª≠a quy·ªÅn</a>
                        
                        <!-- Xo√° nh√¢n vi√™n -->
                        <a href="{% url 'remove_employee' store_user.user.id %}" 
                        onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√° nh√¢n vi√™n n√†y kh√¥ng?')">Xo√°</a>
                    </li>
                {% empty %}
                    <li>Ch∆∞a c√≥ nh√¢n vi√™n n√†o.</li>
                {% endfor %}
            </ul>
        </div>

        <hr>
    </div>
    {% endif %}

    <!-- Ph·∫ßn hi·ªÉn th·ªã cho Nh√¢n vi√™n (Staff) -->
    {% if is_staff %}
    <div class="store-info">
        <h2>Th√¥ng tin kho h√†ng</h2>
        <p><strong>T√™n kho h√†ng:</strong> {{ store.name }}</p>
        <p><strong>ƒê·ªãa ch·ªâ kho h√†ng:</strong> {{ store.address }}</p>
    </div>
    {% endif %}
{% endblock %}
